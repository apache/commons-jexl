<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

        https://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<document>
  <properties>
    <title>Apache Commons JEXL 3.6.2 Release Notes</title>
  </properties>

  <body>
    <section name="Compatibility with previous release">
      <p>
        Version 3.6.2 is source and binary compatible with 3.6.0.
      </p>
    </section>
    <section name="Compatibility with older releases (&lt; 3.3, 2.x)">
      <p>
        Since 3.3 release, the default setting for permissions that determine which packages, classes and methods are
        accessible to scripts has been reduced to a very narrow set. When migrating from previous version of JEXL,
        this may result in breaking your application behavior ; this breaking change requires remediation in your code.
      </p>
      <p>
        Despite the obvious inconvenience - our sincere apologies on the matter -, how much functional and semantic
        power is accessible through scripts has a real impact on your application security and stability ;
        that potential risk requires an informed review and conscious choice on your end.
      </p>
      <p>
        To mitigate the change, you can revert to the previous behavior with one line of code
        (see <a href="apidocs/org/apache/commons/jexl3/introspection/JexlPermissions.html">JexlPermissions</a>,
        <a href="apidocs/org/apache/commons/jexl3/JexlBuilder.html">JexlBuilder</a>
        and
        <a href="apidocs/org/apache/commons/jexl3/scripting/JexlScriptEngine.html">JexlScriptEngine</a>
        ) or use this
        opportunity to reduce exposure. Whether Files, URLs, networking, processes, class-loaders or reflection classes
        or whether loops or side effects are accessible are part of your choice to make.
      </p>
    </section>

    <section name="What is new in 3.6.2:">
      <p>
        JEXL 3.6.2 is a minor release that fixes some bugs.
        It does not introduce any breaking change.
      </p>
    </section>
    <section name="Bugs fixed in 3.6.2:">
      <p>
        <table>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-455">JEXL-455:</a>
            </td>
            <td>Tokenization error with multiline expressions..</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-454">JEXL-454:</a>
            </td>
            <td>Switch NaN case not found.</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-453">JEXL-453:</a>
            </td>
            <td>Finally clause is not evaluated.</td>
          </tr>
        </table>
      </p>
    </section>

    <section name="What was new in 3.6.1:">
      <p>
        JEXL 3.6.1 is a minor release that fixes some bugs.
        It does not introduce any breaking change.
      </p>
    </section>
    <section name="Bugs fixed in 3.6.1:">
      <p>
        <table>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-452">JEXL-452:</a>
            </td>
            <td>Debug setting in Engine shows class/method/line even when set to false.</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-451">JEXL-451:</a>
            </td>
            <td>Restore JexlSandbox permission capabilities on Object.class.</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-450">JEXL-450:</a>
            </td>
            <td>Disable instantiation of internal classes in RESTRICTED mode.</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-449">JEXL-449:</a>
            </td>
            <td>Inconsistency on nature of curly-bracket syntactic elements regarding annotations.</td>
          </tr>
        </table>
      </p>
    </section>

    <section name="What was new in 3.6.0:">
      <p>
        JEXL 3.6.0 introduces a switch statement and expressions (JEXL-440).
        It is a minor release that does not introduce any breaking change.
      </p>
    </section>
    <section name="New Features in 3.6.0:">
      <p>
        <table>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-440">JEXL-440:</a>
            </td>
            <td>Switch statement &amp; expressions.</td>
          </tr>
        </table>
      </p>
    </section>
    <section name="Bugs fixed in 3.6.0:">
      <p>
        <table>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-437">JEXL-447:</a>
            </td>
            <td>Regression in script-defined functions</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-446">JEXL-446:</a>
            </td>
            <td>ClassTool module inspection is too strict</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-442">JEXL-442:</a>
            </td>
            <td>Local variables are not resolved in interpolation string expression</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-441">JEXL-441:</a>
            </td>
            <td>Tokenization error if "\n" in template expression.</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-439">JEXL-439:</a>
            </td>
            <td>When using reference capture, incorrect scoping when local variable redefines a captured symbol</td>
          </tr>
          <tr>
            <td>
              <a href="https://issues.apache.org/jira/browse/JEXL-437">JEXL-437:</a>
            </td>
            <td>Semicolons actually not optional between function calls on separate lines</td>
          </tr>
        </table>
      </p>
    </section>
  </body>
</document>
